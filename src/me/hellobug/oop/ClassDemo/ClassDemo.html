<!DOCTYPE html>
<html>
<head>
    <title>ClassDemo</title>
</head>
<body>
<script src="../Class.js"></script>
<script>
(function(){
    var Class = me.hellobug.oop.Class;

    // 创建超类
    Class("Papa")(function(name, age){
        this.name = name;
        this.age = age;
        this.friends = [];

        var proto = Papa.prototype;
        if(typeof proto.sayHi !== "function"){
            proto.sayHi = function(){
                console.log("Hi, my name is " + this.name + ", I am " + this.age + " years old.");
            };
            proto.laugh = function(){
                console.log(this.name + ":hehehehe~");
            };
            proto.enjoy = function(){
                console.log(this.name + " is enjoying");
            };
        }
    });

    // 创建子类
    Class("Bb").Extends(Papa)(function(name, age){
        this.Super.prototype.Constructor(name, age);

        var proto = Bb.prototype;
        if(typeof proto.work !== "function"){
            proto.enjoy = null;
            proto.work = function(){
                console.log(this.name + " is working");
            };
            proto.laugh = function(count){
                this.Super.prototype.laugh();
                var str = this.name + ":2";
                while(count--) str += "3";
                console.log(str);
            };
        }
    });

    // 创建孙类
    Class("Gb").Extends(Bb)(function(name, age){
        this.Super.prototype.Constructor(name, age);

        var proto = Gb.prototype;
        if(typeof proto.cry !== "function"){
            proto.work = null;
            proto.cry = function(){
                console.log("55555555~");
            };
            proto.laugh = function(){
                // this.Super.prototype.laugh(4);
                console.log(this.name + ":44444444~");
            };
        }
    });

    var ivan = new Papa("ivan", 55);
    var bean = new Papa("bean", 54);
    var ivanb = new Bb("ivanb", 28);
    var ivang = new Gb("ivangb", 2);
    ivan.sayHi();
    bean.enjoy();
    ivanb.work();
    ivang.laugh();
    // ivang.work();
    
    // ivan.friends.push("bean");
    // ivanb.friends.push("beanb");
    // console.log(ivan.friends);
    // console.log(ivanb.friends);

    // console.log(ivanb instanceof Bb);
    // console.log(ivanb instanceof Papa);
    // console.log(ivanb.constructor === Bb);
    // console.log(ivanb.constructor === Papa);
    // alert(ivanb);

    console.log(Gb.prototype);
})();
</script>
</body>
</html>